# Development Environment Configuration
# For local development with minimal security and verbose logging

server:
  host: localhost
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s
  shutdown_timeout: 30s
  max_header_bytes: 1048576
  gin_mode: debug  # Verbose output for development

redis:
  mode: standalone
  addresses:
    - localhost:6379
  password: ""  # No authentication for local Redis
  db: 0
  pool_size: 5
  min_idle_conns: 2
  max_retries: 3
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s
  pool_timeout: 4s
  idle_timeout: 5m
  enable_tls: false
  tls_insecure_skip_verify: false

kubernetes:
  config_path: ~/.kube/config  # Use local kubeconfig
  context: ""  # Use current context
  namespace: ""  # All namespaces
  qps: 50.0
  burst: 100
  timeout: 30s
  enable_watch: true
  watch_resync: 10m

tls:
  enabled: false  # HTTP only for local development
  cert_file: ""
  key_file: ""
  ca_file: ""
  client_auth: none
  min_version: "1.3"
  cipher_suites: []

observability:
  logging:
    level: debug  # Verbose logging for debugging
    format: console  # Human-readable console format
    output_paths:
      - stdout
    error_output_paths:
      - stderr
    enable_caller: true
    enable_stacktrace: true
    development: true  # Development mode with more context

  metrics:
    enabled: true
    path: /metrics
    port: 0  # Use main server port
    namespace: netweave
    subsystem: gateway
    enable_go_metrics: true
    enable_process_metrics: true

  tracing:
    enabled: false  # Disable tracing for local dev
    provider: otlp
    endpoint: ""
    service_name: netweave-gateway-dev
    sampling_rate: 1.0  # Sample all traces if enabled
    enable_batching: false
    batch_timeout: 5s

security:
  enable_cors: true  # Enable CORS for frontend development
  allowed_origins:
    - http://localhost:3000
    - http://localhost:8080
  allowed_methods:
    - GET
    - POST
    - PUT
    - PATCH
    - DELETE
    - OPTIONS
  allowed_headers:
    - "*"
  security_headers:
    enabled: true  # Enable security headers even in dev for testing
    hsts_max_age: 31536000  # 1 year
    hsts_include_subdomains: false  # Disabled for localhost
    hsts_preload: false
    content_security_policy: "default-src 'none'; frame-ancestors 'none'"
    frame_options: "DENY"
    referrer_policy: "strict-origin-when-cross-origin"
  rate_limit_enabled: false  # Disable for easier testing
  rate_limit:
    tenant:
      requests_per_second: 1000
      burst_size: 2000
    global:
      requests_per_second: 10000
      max_concurrent_requests: 1000
    endpoints: []
    resource:
      enabled: false  # Disabled in development for easier testing
      deployment_managers:
        reads_per_minute: 100
        writes_per_minute: 10
        list_page_size_max: 100
      resource_pools:
        reads_per_minute: 500
        writes_per_minute: 50
        list_page_size_max: 100
      resources:
        reads_per_minute: 1000
        writes_per_minute: 100
        list_page_size_max: 100
      resource_types:
        reads_per_minute: 200
        writes_per_minute: 0  # Resource types are read-only
        list_page_size_max: 100
      subscriptions:
        creates_per_hour: 100
        max_active: 50
        reads_per_minute: 200

validation:
  enabled: true
  validate_response: true  # Validate responses in dev for debugging
  spec_path: ""
  max_body_size: 10485760  # 10MB for development

multi_tenancy:
  enabled: false  # Disable multi-tenancy for simple dev setup
  require_mtls: false
  initialize_default_roles: false
  audit_log_retention_days: 7
  skip_auth_paths:
    - /health
    - /healthz
    - /ready
    - /readyz
    - /metrics
    - /
    - /o2ims
  default_tenant_quota:
    max_subscriptions: 100
    max_resource_pools: 50
    max_deployments: 200
    max_users: 20
    max_requests_per_minute: 1000
